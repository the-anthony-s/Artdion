%section.section
  %div.container.container--small
    = form_with(model: photo, local: true, html: { class: 'photoNew form' }) do |f|
      - if photo.errors.any?
        %ul
          - photo.errors.full_messages.each do |message|
            %li= message

      
      %div.photoNew-view
        %div.photoPicker-js
          %label.photoTarget-js
            %div.photoPreview-js
            = f.label :image
            = image_tag f.object.image_url if f.object.cached_image_data
            = f.file_field :image, value: f.object.cached_image_data
            = f.file_field :image, class: 'photoInput', accept: ImageUploader::ALLOWED_TYPES.join(",")
          
          %a.disabled(data-action='remove_current_photo') remove image
        -# = f.label :image, 'Upload your file'

        -# = image_tag photo.image_url(:S300).to_s, 'data-src': photo.image_url, class: "lazy file-upload-preview photo-upload__view__photo", id: "NewPhoto"	    

        -# = f.file_field :image, accept: ImageUploader::ALLOWED_TYPES.join(","), data: { upload_server: upload_server, preview_element: "NewPhoto", upload_result_element: "photo-image-upload-result" }	

        -# = f.hidden_field :image, value: photo.cached_image_data, id: "photo-image-upload-result"

      
      %div.photoNew-details
        = f.text_field :name, label: "Name"
        = f.text_field :description, placeholder: 'Tell everyone about your process and how you came up with this idea', label: "Description", input_html: { class: 'textarea-js' }
        = f.text_field :location, label: 'Place or City'
        = f.text_field :tag_list, input_html: { value: f.object.tag_list.join(',') }
        = f.submit "Upload", class: 'btn btn--primary btn--wide'



-# %section(class="section")
-#   %div(class="container container--small")
    
-#     = simple_form_for(photo, html: { class: 'form photoNew-form' }) do |f|
      

-#       %div(class="photoNew-upload")
-#         = f.label :image
-#         = f.file_field :image

-#         -# = f.file_field :image, accept: ImageUploader::ALLOWED_TYPES.join(","), data: { upload_server: upload_server, preview_element: "preview-cover-photo", upload_result_element: "album-cover-photo-upload-result" }
-#         -# = f.hidden_field :image, value: @photo.image_data, id: "album-cover-photo-upload-result"
-#         -# = image_tag @photo.image_url(:S300).to_s, width: 300, class: "img-thumbnail file-upload-preview", id: "preview-cover-photo"

      
      
-#       %br/
-#       %br/
-#       %br/
-#       = f.input :name
-#       %br/
-#       = f.collection_select :type_id, Type.selection_order.includes([:translations]).all, :id, :name, { class: 'chosen-select'}
-#       %br/
-#       = f.input :description
-#       %br/
-#       = f.input :location
-#       %br/
-#       = f.input :tag_list, input_html: {value: f.object.tag_list.join(",")}
-#       %br/
-#       %br/
-#       %br/
-#       = f.submit